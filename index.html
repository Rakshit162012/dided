<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Master 3√®me - Pr√©paration Brevet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --primary: #0b1b3b;
      --accent: #ffb400;
      --bg-light: #f5f7fb;
      --text-main: #111827;
      --text-muted: #6b7280;
      --radius-md: 10px;
      --radius-lg: 18px;
      --shadow-soft: 0 10px 25px rgba(15, 23, 42, 0.12);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg-light);
      color: var(--text-main);
      line-height: 1.6;
      scroll-behavior: smooth;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: var(--primary);
      color: #fff;
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.3);
    }

    .nav-container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0.6rem 1.2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .logo {
      font-weight: 800;
      letter-spacing: 0.08em;
      font-size: 1rem;
      text-transform: uppercase;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
      align-items: center;
      font-size: 0.95rem;
    }

    .nav-links a {
      padding: 0.35rem 0.6rem;
      border-radius: 999px;
      transition: background 0.2s, color 0.2s, transform 0.1s;
    }

    .nav-links a:hover {
      background: rgba(255, 255, 255, 0.12);
      transform: translateY(-1px);
    }

    .nav-links a.active-link {
      background: var(--accent);
      color: #111827;
      font-weight: 600;
    }

    .nav-toggle {
      display: none;
      flex-direction: column;
      gap: 5px;
      cursor: pointer;
    }

    .nav-toggle span {
      width: 22px;
      height: 2px;
      background: #ffffff;
      border-radius: 999px;
      transition: transform 0.2s, opacity 0.2s;
    }

    .nav-toggle.open span:nth-child(1) {
      transform: translateY(7px) rotate(45deg);
    }

    .nav-toggle.open span:nth-child(2) {
      opacity: 0;
    }

    .nav-toggle.open span:nth-child(3) {
      transform: translateY(-7px) rotate(-45deg);
    }

    @media (max-width: 720px) {
      .nav-links {
        position: fixed;
        inset: 52px 0 auto 0;
        background: var(--primary);
        flex-direction: column;
        padding: 0.8rem 1.2rem 1.2rem;
        transform: translateY(-120%);
        transition: transform 0.22s ease-out;
      }

      .nav-links.open {
        transform: translateY(0);
      }

      .nav-toggle {
        display: flex;
      }
    }

    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem 1.2rem 3rem;
      min-height: calc(100vh - 80px);
    }

    .page {
      display: none;
      margin-bottom: 3rem;
    }

    .page.active {
      display: block;
    }

    .section-title {
      font-size: 1.6rem;
      margin-bottom: 0.75rem;
    }

    .section-subtitle {
      color: var(--text-muted);
      margin-bottom: 1rem;
      font-size: 0.96rem;
    }

    /* ---------- PAGE : ACCUEIL ---------- */
    .hero {
      background: linear-gradient(135deg, var(--primary), #1f2a5c);
      border-radius: var(--radius-lg);
      padding: 2.2rem 2.1rem;
      color: #ffffff;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.2fr);
      gap: 2rem;
      box-shadow: var(--shadow-soft);
      margin-top: 1.2rem;
    }

    .hero-title {
      font-size: 2.1rem;
      margin-bottom: 0.5rem;
    }

    .hero-subtitle {
      font-size: 1rem;
      color: #e5e7eb;
      max-width: 32rem;
    }

    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin: 1rem 0 1.7rem;
    }

    .hero-badge {
      background: rgba(15, 23, 42, 0.3);
      border-radius: 999px;
      padding: 0.3rem 0.7rem;
      font-size: 0.8rem;
      border: 1px solid rgba(156, 163, 175, 0.3);
    }

    .cta-primary {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.6rem;
      border-radius: 999px;
      background: var(--accent);
      color: #111827;
      font-weight: 700;
      letter-spacing: 0.03em;
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.25);
      transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
    }

    .cta-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.28);
      background: #ffc94a;
    }

    .cta-primary span {
      margin-left: 0.4rem;
    }

    .hero-side {
      background: rgba(15, 23, 42, 0.18);
      border-radius: var(--radius-md);
      padding: 1.4rem 1.3rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 0.7rem;
    }

    .hero-side-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.2rem;
    }

    .hero-side-list {
      font-size: 0.92rem;
      color: #e5e7eb;
      list-style: none;
    }

    .hero-side-list li {
      margin-bottom: 0.3rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    .hero-side-tagline {
      margin-top: 0.7rem;
      font-size: 0.86rem;
      color: #d1d5db;
    }

    @media (max-width: 880px) {
      .hero {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .alert-urgent {
      background: linear-gradient(120deg, #ffb400, #ff7a00);
      color: #111827;
      border-radius: var(--radius-md);
      padding: 1rem 1.2rem;
      margin-top: 1.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      box-shadow: var(--shadow-soft);
    }

    .alert-urgent-title {
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .alert-urgent-list {
      list-style: disc;
      padding-left: 1.3rem;
      font-size: 0.9rem;
    }

    .feature-grid {
      margin-top: 2rem;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.4rem;
    }

    .feature-card {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 1.1rem 1rem;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 160px;
      border: 1px solid #e5e7eb;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .feature-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.12);
    }

    .feature-icon {
      font-size: 1.6rem;
      margin-bottom: 0.2rem;
    }

    .feature-title {
      font-weight: 700;
      margin-bottom: 0.2rem;
    }

    .feature-text {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.7rem;
    }

    .feature-link {
      margin-top: auto;
      font-size: 0.88rem;
      font-weight: 600;
      color: var(--primary);
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    @media (max-width: 860px) {
      .feature-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .feature-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* ---------- PAGE : RESSOURCES (INDEX) ---------- */
    .subjects-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1.4rem;
      margin-top: 1.2rem;
    }

    @media (max-width: 780px) {
      .subjects-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .subject-card {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 1.1rem 1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.07);
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
    }

    .subject-title {
      font-size: 1.1rem;
      font-weight: 700;
    }

    .subject-tag {
      font-size: 0.84rem;
      color: var(--text-muted);
    }

    .subject-desc {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .subject-link {
      margin-top: 0.2rem;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--primary);
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    /* ---------- SOUS-PAGES DE MATI√àRES ---------- */
    .subject-page {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 1.2rem 1.1rem 1.3rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.07);
      margin-top: 1.3rem;
    }

    .subject-page-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.7rem;
      margin-bottom: 0.5rem;
    }

    .subject-page-title {
      font-size: 1.3rem;
      font-weight: 700;
    }

    .subject-page-tagline {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .subject-back {
      font-size: 0.86rem;
      color: var(--primary);
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      margin-bottom: 0.4rem;
      cursor: pointer;
    }

    .resource-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.9rem;
      margin-top: 0.6rem;
    }

    @media (max-width: 680px) {
      .resource-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    details {
      border-radius: 8px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      padding: 0.6rem 0.7rem;
    }

    details[open] {
      background: #f3f4ff;
      border-color: #c7d2fe;
    }

    summary {
      cursor: pointer;
      font-weight: 600;
      font-size: 0.94rem;
      list-style: none;
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    summary::-webkit-details-marker {
      display: none;
    }

    .summary-prefix {
      font-size: 1rem;
    }

    details > div {
      margin-top: 0.5rem;
      font-size: 0.88rem;
      color: var(--text-muted);
    }

    .resource-links {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      margin-top: 0.3rem;
    }

    .resource-link {
      font-size: 0.88rem;
      color: var(--primary);
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
    }

    .resource-pill {
      display: inline-flex;
      align-items: center;
      padding: 0.15rem 0.55rem;
      border-radius: 999px;
      background: #e5e7eb;
      font-size: 0.76rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      color: #374151;
    }

    /* ---------- PAGE : OUTILS & M√âTHODES ---------- */
    .tools-grid {
      margin-top: 1.2rem;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.2rem;
    }

    @media (max-width: 960px) {
      .tools-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 720px) {
      .tools-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .tool-card {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 1rem 0.95rem 1.1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.07);
      display: flex;
      flex-direction: column;
      gap: 0.6rem;
    }

    .tool-title {
      font-size: 1rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .tool-badge {
      font-size: 0.75rem;
      padding: 0.1rem 0.5rem;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
    }

    .tool-text {
      font-size: 0.88rem;
      color: var(--text-muted);
    }

    .tool-placeholder {
      margin-top: 0.3rem;
      border-radius: 10px;
      overflow: hidden;
      border: 1px dashed #d1d5db;
      background: #f9fafb;
    }

    .tool-note {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.4rem;
    }

    .method-buttons {
      display: flex;
      flex-direction: column;
      gap: 0.45rem;
      margin-top: 0.3rem;
    }

    .method-btn {
      padding: 0.45rem 0.7rem;
      border-radius: 999px;
      border: none;
      background: #f3f4ff;
      color: #111827;
      font-size: 0.88rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: background 0.12s, transform 0.08s;
    }

    .method-btn:hover {
      background: #e0e7ff;
      transform: translateY(-1px);
    }

    /* ---------- PAGE : AGENDA & SUIVI ---------- */
    .calendar-block {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 1rem 1rem 1.3rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.07);
      margin-top: 1.2rem;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 0.6rem;
      margin-bottom: 0.7rem;
    }

    .calendar-title {
      font-size: 1.05rem;
      font-weight: 700;
    }

    .calendar-help {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .calendar-placeholder,
    .dashboard-placeholder {
      border-radius: 12px;
      overflow: hidden;
      border: 1px dashed #d1d5db;
      background: #f9fafb;
      margin-top: 0.6rem;
    }

    .dashboard-grid {
      margin-top: 1.6rem;
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 1.2rem;
    }

    @media (max-width: 880px) {
      .dashboard-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .dashboard-info {
      background: #ffffff;
      border-radius: var(--radius-md);
      padding: 1rem 1rem 1.1rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.07);
    }

    .dashboard-title {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 0.3rem;
    }

    .dashboard-text {
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .dashboard-list {
      margin-top: 0.7rem;
      font-size: 0.88rem;
      color: var(--text-muted);
      list-style: disc;
      padding-left: 1.2rem;
    }

    .dashboard-note {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.6rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      background: #e5e7eb;
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      color: #374151;
    }

    footer {
      text-align: center;
      font-size: 0.8rem;
      padding: 1rem 0 0.8rem;
      color: var(--text-muted);
    }

    /* ---------- NAME GATE / WELCOME BAR ---------- */
    .welcome-bar {
      display: flex;
      align-items: center;
      gap: 0.7rem;
      font-size: 0.9rem;
    }

    .welcome-link {
      border: none;
      background: none;
      color: #ffb400;
      text-decoration: underline;
      cursor: pointer;
      font-size: 0.85rem;
    }

    .name-gate {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .name-gate--hidden {
      display: none;
    }

    .name-gate__backdrop {
      position: absolute;
      inset: 0;
      background: rgba(15, 23, 42, 0.7);
    }

    .name-gate__content {
      position: relative;
      z-index: 1;
      max-width: 360px;
      width: 90%;
      background: #0b1b3b;
      color: #f9fafb;
      padding: 1.5rem 1.4rem;
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(15, 23, 42, 0.6);
    }

    .name-gate__label {
      display: block;
      margin-top: 1rem;
      margin-bottom: 0.35rem;
      font-weight: 600;
    }

    #visitor-name {
      width: 100%;
      padding: 0.5rem 0.6rem;
      border-radius: 6px;
      border: 1px solid #cbd5f5;
      font-size: 0.95rem;
    }

    #visitor-name:focus {
      outline: 2px solid #ffb400;
      outline-offset: 2px;
    }

    .name-gate__error {
      min-height: 1.1em;
      margin-top: 0.25rem;
      color: #fed7d7;
      font-size: 0.85rem;
    }

    .name-gate__submit {
      margin-top: 1rem;
      width: 100%;
      padding: 0.6rem 0.8rem;
      border-radius: 999px;
      border: none;
      background: #ffb400;
      color: #0b1b3b;
      font-weight: 700;
      cursor: pointer;
    }

    .name-gate__submit:hover {
      background: #ffd260;
    }

    .name-gate__cancel {
      margin-top: 0.6rem;
      width: 100%;
      padding: 0.45rem 0.8rem;
      border-radius: 999px;
      border: 1px solid #cbd5f5;
      background: transparent;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 0.85rem;
    }
  </style>
</head>
<body>
  <header>
    <div class="nav-container">
      <div class="logo">MASTER 3√àME</div>
      <nav>
        <div class="nav-toggle" id="navToggle" aria-label="Ouvrir le menu" aria-expanded="false">
          <span></span><span></span><span></span>
        </div>
        <div class="nav-links" id="navLinks">
          <a href="#accueil" data-page="accueil" class="active-link">Accueil</a>
          <a href="#ressources" data-page="ressources">Ressources (Fiches)</a>
          <a href="#outils" data-page="outils">Outils & M√©thodes</a>
          <a href="#agenda" data-page="agenda">Agenda & Suivi</a>
        </div>
      </nav>

      <!-- Welcome bar added inside header -->
      <div id="welcome-bar" class="welcome-bar" aria-live="polite">
        <span id="welcome-message"></span>
        <button id="change-name-btn" type="button" class="welcome-link">
          Change name
        </button>
      </div>
    </div>
  </header>

  <!-- Name gate overlay (full-page, progressively enhanced) -->
  <div
    id="name-gate"
    class="name-gate name-gate--hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="name-gate-title"
  >
    <div class="name-gate__backdrop"></div>

    <div class="name-gate__content" role="document">
      <h2 id="name-gate-title">Welcome to Master 3√®me</h2>
      <p id="name-gate-desc">
        Please tell us your first name so we can personalize your experience.
      </p>

      <form id="name-gate-form" novalidate>
        <label for="visitor-name" class="name-gate__label">
          Your name
        </label>
        <input
          id="visitor-name"
          name="visitorName"
          type="text"
          autocomplete="name"
          required
          minlength="2"
          maxlength="50"
          aria-describedby="name-error"
        />
        <p
          id="name-error"
          class="name-gate__error"
          role="alert"
          aria-live="assertive"
        ></p>

        <button type="submit" class="name-gate__submit">
          Continue
        </button>
      </form>

      <button
        type="button"
        id="name-gate-cancel"
        class="name-gate__cancel"
      >
        Cancel
      </button>
    </div>
  </div>

  <!-- No-JS fallback: simple page-level form on /name route (server renders this). -->
  <noscript>
    <main>
      <h1>Welcome</h1>
      <p>Please enter your name to continue.</p>
      <form action="/name" method="post">
        <label for="visitor-name-nojs">Your name</label>
        <input
          id="visitor-name-nojs"
          name="visitorName"
          type="text"
          required
          minlength="2"
          maxlength="50"
        />
        <button type="submit">Continue</button>
      </form>
    </main>
  </noscript>

  <main>
    <!-- ACCUEIL -->
    <section id="accueil" class="page active">
      <div class="hero">
        <div>
          <h1 class="hero-title">MASTER 3√àME : Votre Brevet, ma√Ætris√©.</h1>
          <p class="hero-subtitle">
            La plateforme unique pour organiser, r√©viser et dominer votre ann√©e de Troisi√®me, sans stress et avec une m√©thode claire.
          </p>
          <div class="hero-badges">
            <span class="hero-badge">üìö Toutes les mati√®res</span>
            <span class="hero-badge">‚è±Ô∏è Objectif Brevet 2025</span>
            <span class="hero-badge">‚úÖ Suivi de progression</span>
          </div>
          <a href="#ressources" data-link="ressources">
            <button class="cta-primary">
              LANCER MES R√âVISIONS <span>üöÄ</span>
            </button>
          </a>
        </div>
        <aside class="hero-side">
          <p class="hero-side-title">Pourquoi utiliser Master 3√®me ?</p>
          <ul class="hero-side-list">
            <li>‚úÖ Fiches organis√©es par mati√®re.</li>
            <li>‚úÖ Liens vers cartes mentales, quiz et flashcards.</li>
            <li>‚úÖ Outils pour calculer points et moyenne.</li>
            <li>‚úÖ Agenda connect√© √† ton planning r√©el.</li>
          </ul>
          <p class="hero-side-tagline">
            Commence aujourd'hui, avance un peu chaque semaine, et arrive serein au Brevet.
          </p>
        </aside>
      </div>

      <div class="alert-urgent" aria-label="Annonces urgentes">
        <div class="alert-urgent-title">üö® ANNONCES URGENTES üö®</div>
        <ul class="alert-urgent-list">
          <li>Simule d√®s maintenant tes points au Brevet pour fixer ton objectif.</li>
          <li>Ajoute les dates de tes contr√¥les importants dans l'agenda.</li>
          <li>Planifie au moins 2 s√©ances de r√©vision par semaine, par mati√®re cl√©.</li>
        </ul>
      </div>

      <div class="feature-grid">
        <article class="feature-card">
          <div>
            <div class="feature-icon">üìë</div>
            <h3 class="feature-title">Fiches & Ressources</h3>
            <p class="feature-text">
              Acc√®de aux fiches de r√©vision, cartes mentales, quiz et exercices pour chaque mati√®re du Brevet.
            </p>
          </div>
          <a href="#ressources" data-link="ressources" class="feature-link">
            Aller aux ressources <span>‚Üí</span>
          </a>
        </article>

        <article class="feature-card">
          <div>
            <div class="feature-icon">üß∞</div>
            <h3 class="feature-title">Outils & M√©thodes</h3>
            <p class="feature-text">
              Utilise les calculateurs de points, moyenne g√©n√©rale et des fiches m√©thode pour les √©preuves √©crites.
            </p>
          </div>
          <a href="#outils" data-link="outils" class="feature-link">
            D√©couvrir les outils <span>‚Üí</span>
          </a>
        </article>

        <article class="feature-card">
          <div>
            <div class="feature-icon">üóìÔ∏è</div>
            <h3 class="feature-title">Agenda & Suivi</h3>
            <p class="feature-text">
              Organise tes semaines, note tes contr√¥les et suis ta progression avec un dashboard simple.
            </p>
          </div>
          <a href="#agenda" data-link="agenda" class="feature-link">
            Voir l'agenda <span>‚Üí</span>
          </a>
        </article>
      </div>
    </section>

    <!-- RESSOURCES INDEX -->
    <section id="ressources" class="page">
      <h2 class="section-title">Ressources par mati√®re</h2>
      <p class="section-subtitle">
        Choisis une mati√®re pour acc√©der aux fiches de r√©vision, cartes mentales, quiz, exercices, √©valuations d'entra√Ænement et sites tout-en-un.
      </p>

      <div class="subjects-grid">
        <article class="subject-card">
          <h3 class="subject-title">Math√©matiques</h3>
          <p class="subject-tag">Alg√®bre ¬∑ G√©om√©trie ¬∑ Probl√®mes</p>
          <p class="subject-desc">
            Fiches, exercices et quiz pour ma√Ætriser les bases en calcul, fonctions, statistiques et g√©om√©trie.
          </p>
          <a href="#ressources-maths" data-link="ressources-maths" class="subject-link">
            Ouvrir la page Math√©matiques ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">Fran√ßais</h3>
          <p class="subject-tag">Langue ¬∑ R√©daction ¬∑ Lecture</p>
          <p class="subject-desc">
            M√©thodes de r√©daction, fiches de grammaire, quiz et exercices pour l‚Äô√©preuve √©crite.
          </p>
          <a href="#ressources-francais" data-link="ressources-francais" class="subject-link">
            Ouvrir la page Fran√ßais ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">Histoire</h3>
          <p class="subject-tag">Rep√®res ¬∑ Th√®mes majeurs</p>
          <p class="subject-desc">
            Fiches chronologiques, cartes mentales et quiz sur les grands √©v√©nements du programme.
          </p>
          <a href="#ressources-histoire" data-link="ressources-histoire" class="subject-link">
            Ouvrir la page Histoire ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">G√©ographie</h3>
          <p class="subject-tag">Cartes ¬∑ Territoires</p>
          <p class="subject-desc">
            Cartes, sch√©mas et exercices pour les espaces fran√ßais et mondiaux.
          </p>
          <a href="#ressources-geographie" data-link="ressources-geographie" class="subject-link">
            Ouvrir la page G√©ographie ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">EMC</h3>
          <p class="subject-tag">Valeurs ¬∑ Citoyennet√©</p>
          <p class="subject-desc">
            Ressources sur les valeurs de la R√©publique, les droits, les devoirs et la vie d√©mocratique.
          </p>
          <a href="#ressources-emc" data-link="ressources-emc" class="subject-link">
            Ouvrir la page EMC ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">Physique - Chimie</h3>
          <p class="subject-tag">Lois ¬∑ Exp√©riences</p>
          <p class="subject-desc">
            Lois physiques, mod√®les, r√©actions chimiques et √©valuations d‚Äôentra√Ænement.
          </p>
          <a href="#ressources-physique" data-link="ressources-physique" class="subject-link">
            Ouvrir la page Physique - Chimie ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">Sciences de la Vie & de la Terre</h3>
          <p class="subject-tag">Corps humain ¬∑ Environnement</p>
          <p class="subject-desc">
            Fiches et activit√©s sur le vivant, la plan√®te, les risques et la sant√©.
          </p>
          <a href="#ressources-svt" data-link="ressources-svt" class="subject-link">
            Ouvrir la page SVT ‚Üí
          </a>
        </article>

        <article class="subject-card">
          <h3 class="subject-title">DNL Anglais (Mme Houdant)</h3>
          <p class="subject-tag">CLIL ¬∑ Anglais scientifique</p>
          <p class="subject-desc">
            Ressources bilingues, vocabulaire scientifique et activit√©s pour la DNL Anglais.
          </p>
          <a href="#ressources-dnl" data-link="ressources-dnl" class="subject-link">
            Ouvrir la page DNL Anglais ‚Üí
          </a>
        </article>
      </div>
    </section>

    <!-- SOUS-PAGES: m√™mes que dans ton fichier (Maths, Fran√ßais, etc.) -->
    <!-- Pour gagner de la place ici, je garde l‚Äôexemple Maths, √† dupliquer
         avec le m√™me contenu que ton fichier pour les autres mati√®res. -->

    <section id="ressources-maths" class="page">
      <div class="subject-page">
        <div class="subject-page-header">
          <div>
            <span class="subject-back" data-link="ressources">‚Üê Retour aux mati√®res</span>
            <h2 class="subject-page-title">Math√©matiques</h2>
          </div>
          <span class="pill">Brevet ¬∑ Math√©matiques</span>
        </div>
        <p class="subject-page-tagline">
          Fiches de r√©vision, exercices, flashcards et √©valuations d‚Äôentra√Ænement pour ma√Ætriser nombres, fonctions, statistiques et g√©om√©trie.
        </p>

        <div class="resource-grid">
          <!-- 8 cat√©gories comme dans ton code existant -->
          <details>
            <summary><span class="summary-prefix">üìë</span>Fiches de R√©vision & Le√ßons</summary>
            <div>
              <p>Fiches synth√©tiques pour revoir les notions cl√©s.</p>
              <div class="resource-links">
                <a href="#" class="resource-link"><span class="resource-pill">PDF</span>Nombres & calculs</a>
                <a href="#" class="resource-link"><span class="resource-pill">PDF</span>Proportionnalit√© & pourcentages</a>
                <a href="#" class="resource-link"><span class="resource-pill">PDF</span>Thal√®s, Pythagore, trigonom√©trie</a>
              </div>
            </div>
          </details>
          <!-- ... (reprends ici exactement les autres <details> de ton fichier) -->
        </div>
      </div>
    </section>

    <!-- Idem pour: #ressources-francais, #ressources-histoire, #ressources-geographie,
         #ressources-emc, #ressources-physique, #ressources-svt, #ressources-dnl
         avec le contenu d√©j√† pr√©sent dans ton fichier. -->

    <!-- OUTILS & M√âTHODES -->
    <section id="outils" class="page">
      <h2 class="section-title">Outils & M√©thodes</h2>
      <p class="section-subtitle">
        Pr√©pare-toi efficacement gr√¢ce aux calculateurs de points, aux outils de moyenne g√©n√©rale et aux fiches m√©thode DNB.
      </p>

      <div class="tools-grid">
        <article class="tool-card">
          <div>
            <h3 class="tool-title">
              üìä Calculateur points Brevet
              <span class="tool-badge">Embed pr√™t</span>
            </h3>
            <p class="tool-text">
              Simule ton total de points au DNB √† partir de tes notes de contr√¥le continu et des √©preuves finales.
            </p>
          </div>
          <div class="tool-placeholder">
            <iframe
              title="Calculateur points Brevet"
              width="100%"
              height="400"
              src="[Placeholder URL d'int√©gration ici]"
            ></iframe>
          </div>
          <p class="tool-note">
            Remplace l‚ÄôURL par le lien d‚Äôint√©gration de ton tableau Google Sheets (mode public ou restreint).
          </p>
        </article>

        <article class="tool-card">
          <div>
            <h3 class="tool-title">
              üìà Calculateur moyenne g√©n√©rale
              <span class="tool-badge">Embed pr√™t</span>
            </h3>
            <p class="tool-text">
              Calcule ta moyenne g√©n√©rale sur l‚Äôann√©e et observe ta progression au fil des trimestres.
            </p>
          </div>
          <div class="tool-placeholder">
            <iframe
              title="Calculateur moyenne g√©n√©rale"
              width="100%"
              height="400"
              src="[Placeholder URL d'int√©gration ici]"
            ></iframe>
          </div>
          <p class="tool-note">
            Colle ici l‚ÄôURL d‚Äôint√©gration de ton tableau de suivi des moyennes (Google Sheets ou autre outil).
          </p>
        </article>

        <article class="tool-card">
          <div>
            <h3 class="tool-title">
              üß† Fiches m√©thode DNB
              <span class="tool-badge">√âtapes cl√©s</span>
            </h3>
            <p class="tool-text">
              Utilise ces fiches pour apprendre √† r√©pondre exactement comme attendu le jour du Brevet.
            </p>
          </div>
          <div class="method-buttons">
            <button class="method-btn">‚úçÔ∏è R√©daction (Fran√ßais)<span>Ouvrir</span></button>
            <button class="method-btn">üîç Analyse de documents<span>Ouvrir</span></button>
            <button class="method-btn">üß™ D√©marche scientifique<span>Ouvrir</span></button>
            <button class="method-btn">üßÆ R√©solution de probl√®mes<span>Ouvrir</span></button>
          </div>
          <p class="tool-note">
            Chaque bouton peut pointer vers une fiche PDF, une page Notion, ou un diaporama de m√©thode.
          </p>
        </article>
      </div>
    </section>

    <!-- AGENDA & SUIVI -->
    <section id="agenda" class="page">
      <h2 class="section-title">Agenda & Suivi</h2>
      <p class="section-subtitle">
        Organise ton ann√©e avec un calendrier clair et un tableau de bord pour suivre tes progr√®s vers le Brevet.
      </p>

      <div class="calendar-block">
        <div class="calendar-header">
          <div>
            <p class="calendar-title">Calendrier de r√©visions & contr√¥les</p>
            <p class="calendar-help">
              Ajoute les dates des contr√¥les, oraux blancs et p√©riodes de r√©visions intensives.
            </p>
          </div>
          <span class="pill">Google Calendar pr√™t</span>
        </div>
        <div class="calendar-placeholder">
          <iframe
            title="Calendrier de r√©visions"
            width="100%"
            height="600"
            src="[Placeholder URL Google Calendar ici]"
          ></iframe>
        </div>
      </div>

      <div class="dashboard-grid">
        <div class="dashboard-info">
          <h3 class="dashboard-title">Dashboard de R√©ussite</h3>
          <p class="dashboard-text">
            Utilisez cet outil pour enregistrer vos progr√®s et visualiser votre am√©lioration au fil des semaines.
          </p>
          <ul class="dashboard-list">
            <li>Note tes moyennes par mati√®re √† chaque trimestre.</li>
            <li>Indique les dates de r√©visions effectu√©es et les chapitres travaill√©s.</li>
            <li>Observe si tu respectes ton objectif de s√©ances de r√©vision hebdomadaires.</li>
          </ul>
          <p class="dashboard-note">
            L‚Äôobjectif est de rendre ta progression visible pour rester motiv√© jusqu‚Äôau jour J.
          </p>
        </div>
        <div class="dashboard-placeholder">
          <iframe
            title="Formulaire de suivi de progression"
            width="100%"
            height="400"
            src="[Placeholder URL d'int√©gration ici]"
          ></iframe>
        </div>
      </div>
    </section>
  </main>

  <footer>
    ¬© <span id="year"></span> Master 3√®me ¬∑ Pr√©paration Brevet.
  </footer>

  <script>
    // ---------- Navigation / pages (identique √† avant) ----------
    const navToggle = document.getElementById('navToggle');
    const navLinks = document.getElementById('navLinks');
    const linkItems = navLinks.querySelectorAll('a');
    const pages = document.querySelectorAll('.page');

    function showPage(id) {
      pages.forEach(p => {
        p.classList.toggle('active', p.id === id);
      });
      linkItems.forEach(link => {
        const page = link.dataset.page;
        link.classList.toggle(
          'active-link',
          page === id || (id.startsWith('ressources-') && page === 'ressources')
        );
      });
      window.scrollTo({ top: 0, behavior: 'instant' });
    }

    function getHashPage() {
      const hash = window.location.hash.replace('#', '');
      if (!hash) return 'accueil';
      const validIds = Array.from(pages).map(p => p.id);
      return validIds.includes(hash) ? hash : 'accueil';
    }

    function handleHashChange() {
      const pageId = getHashPage();
      showPage(pageId);
    }

    window.addEventListener('hashchange', handleHashChange);
    window.addEventListener('load', () => {
      document.getElementById('year').textContent = new Date().getFullYear();
      handleHashChange();
    });

    navToggle.addEventListener('click', () => {
      const isOpen = navLinks.classList.toggle('open');
      navToggle.classList.toggle('open');
      navToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
    });

    linkItems.forEach(link => {
      link.addEventListener('click', () => {
        if (window.innerWidth <= 720) {
          navLinks.classList.remove('open');
          navToggle.classList.remove('open');
          navToggle.setAttribute('aria-expanded', 'false');
        }
      });
    });

    document.querySelectorAll('[data-link]').forEach(el => {
      el.addEventListener('click', (e) => {
        const target = el.getAttribute('data-link');
        if (target) {
          e.preventDefault();
          window.location.hash = target;
        }
      });
    });

    // ---------- Name gate logic (client-only) ----------
    const NAME_KEY = 'visitorName';
    const NAME_META_KEY = 'visitorNameMeta';
    const NAME_COOKIE = 'visitorName';
    const NAME_MAX_AGE_DAYS = 30;
    const MIN_NAME_LEN = 2;
    const MAX_NAME_LEN = 50;

    function supportsLocalStorage() {
      try {
        const testKey = '__test_ls__';
        window.localStorage.setItem(testKey, '1');
        window.localStorage.removeItem(testKey);
        return true;
      } catch (e) {
        return false;
      }
    }

    const hasLocal = supportsLocalStorage();

    function setCookie(name, value, days) {
      const date = new Date();
      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
      document.cookie =
        name +
        '=' +
        encodeURIComponent(value) +
        ';expires=' +
        date.toUTCString() +
        ';path=/';
    }

    function getCookie(name) {
      const nameEQ = name + '=';
      const parts = document.cookie.split(';');
      for (let c of parts) {
        c = c.trim();
        if (c.indexOf(nameEQ) === 0) {
          return decodeURIComponent(c.substring(nameEQ.length));
        }
      }
      return null;
    }

    function deleteCookie(name) {
      document.cookie =
        name + '=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';
    }

    function saveName(name) {
      const meta = {
        savedAt: Date.now(),
        expiresAt:
          Date.now() + NAME_MAX_AGE_DAYS * 24 * 60 * 60 * 1000,
      };
      if (hasLocal) {
        localStorage.setItem(NAME_KEY, name);
        localStorage.setItem(NAME_META_KEY, JSON.stringify(meta));
      } else {
        setCookie(NAME_KEY, name, NAME_MAX_AGE_DAYS);
      }
    }

    function clearName() {
      if (hasLocal) {
        localStorage.removeItem(NAME_KEY);
        localStorage.removeItem(NAME_META_KEY);
      }
      deleteCookie(NAME_KEY);
    }

    function loadName() {
      let name = null;
      if (hasLocal) {
        name = localStorage.getItem(NAME_KEY);
        const rawMeta = localStorage.getItem(NAME_META_KEY);
        if (name && rawMeta) {
          try {
            const meta = JSON.parse(rawMeta);
            if (meta.expiresAt && Date.now() > meta.expiresAt) {
              clearName();
              name = null;
            }
          } catch {
            // ignore broken meta
          }
        }
      } else {
        name = getCookie(NAME_KEY);
      }
      if (!name) return null;
      const trimmed = name.trim();
      return validateName(trimmed) ? trimmed : null;
    }

    function validateName(value) {
      const name = value.trim();
      if (name.length < MIN_NAME_LEN || name.length > MAX_NAME_LEN) {
        return false;
      }
      if (/^[\x00-\x1F\x7F]+$/.test(name)) {
        return false;
      }
      return true;
    }

    function getValidationMessage(value) {
      const name = value.trim();
      if (!name) {
        return 'Please enter your name.';
      }
      if (name.length < MIN_NAME_LEN) {
        return 'Name must be at least ' + MIN_NAME_LEN + ' characters.';
      }
      if (name.length > MAX_NAME_LEN) {
        return 'Name must be at most ' + MAX_NAME_LEN + ' characters.';
      }
      if (/^[\x00-\x1F\x7F]+$/.test(name)) {
        return 'Name cannot consist only of control characters.';
      }
      return '';
    }

    const gate = document.getElementById('name-gate');
    const gateForm = document.getElementById('name-gate-form');
    const gateInput = document.getElementById('visitor-name');
    const gateError = document.getElementById('name-error');
    const gateCancel = document.getElementById('name-gate-cancel');
    const welcomeMsg = document.getElementById('welcome-message');
    const changeNameBtn = document.getElementById('change-name-btn');

    function setWelcome(name) {
      if (!welcomeMsg) return;
      welcomeMsg.textContent = name ? 'Welcome, ' + name + '!' : '';
    }

    function getFocusableElements(container) {
      return Array.from(
        container.querySelectorAll(
          'a[href], button:not([disabled]), textarea, input:not([disabled]), select, [tabindex]:not([tabindex="-1"])'
        )
      );
    }

    function openGate(options = {}) {
      gate.classList.remove('name-gate--hidden');
      const focusables = getFocusableElements(gate);
      const first = focusables[0];
      const last = focusables[focusables.length - 1];

      if (options.mode === 'change' && gateCancel) {
        gateCancel.style.display = 'block';
      } else if (gateCancel) {
        gateCancel.style.display = 'none';
      }

      if (gateInput) gateInput.focus();

      function trap(e) {
        if (e.key === 'Tab') {
          if (e.shiftKey && document.activeElement === first) {
            e.preventDefault();
            last.focus();
          } else if (!e.shiftKey && document.activeElement === last) {
            e.preventDefault();
            first.focus();
          }
        } else if (e.key === 'Escape' && options.mode === 'change') {
          e.preventDefault();
          closeGate();
        }
      }

      gate.addEventListener('keydown', trap);
      gate._cleanupTrap = () => gate.removeEventListener('keydown', trap);
    }

    function closeGate() {
      if (gate._cleanupTrap) gate._cleanupTrap();
      gate.classList.add('name-gate--hidden');
    }

    gateForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const raw = gateInput.value || '';
      const msg = getValidationMessage(raw);
      if (msg) {
        gateError.textContent = msg;
        gateInput.setAttribute('aria-invalid', 'true');
        gateInput.focus();
        return;
      }
      const clean = raw.trim();
      gateError.textContent = '';
      gateInput.removeAttribute('aria-invalid');
      saveName(clean);
      setWelcome(clean);
      closeGate();
    });

    gateInput.addEventListener('input', () => {
      if (!gateError.textContent) return;
      const msg = getValidationMessage(gateInput.value || '');
      gateError.textContent = msg;
    });

    if (gateCancel) {
      gateCancel.addEventListener('click', () => {
        closeGate();
      });
    }

    if (changeNameBtn) {
      changeNameBtn.addEventListener('click', () => {
        const current = loadName();
        if (current) gateInput.value = current;
        openGate({ mode: 'change' });
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const stored = loadName();
      if (stored) {
        setWelcome(stored);
      } else {
        openGate({ mode: 'first' });
      }
    });
  </script>
</body>
</html>
